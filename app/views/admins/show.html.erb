<div class='flex flex-row justify-end items-center px-5 gap-5'>
    <% if logged_in? %>
        <p> <%= t('todo.welcome')%>, <%= current_user.name%> !</p>
        <%= button_to User.human_attribute_name(:logout), logout_path, method: :delete, class: 'inline-block px-8 py-2 bg-[#96a78d] text-white rounded-lg border border-black'%>
    <% else %>
        <%= link_to User.human_attribute_name(:login), login_path, class: 'inline-block px-8 py-2 bg-[#96a78d] text-white rounded-lg border border-black'%>
    <% end %>
    <div>
        <%= link_to t('todo.language_switch'), url_for(locale: I18n.locale == :zh ? :en : :zh), class: 'inline-block px-8 py-2 bg-[#96a78d] text-white rounded-lg border border-black'%>
    </div>
</div>
<div class='flex flex-col items-start px-40'>
    <div class='py-10 text-5xl'>
        <%= @user.name %>
    </div>

    <div class='rounded-lg bg-[#d9e9cf] border border-gray-500 w-full p-10 text-xl'>
        <div class='m-5'><%= User.human_attribute_name(:email) %> :  <%= @user.email %></div>
        <div class='m-5'><%= User.human_attribute_name(:role) %> :  <%= @user.manager ? "Admin" : "User" %></div>
        <div class='m-5'><%= User.human_attribute_name(:task_num) %> : <%= @user.tasks_count %></div>

        <div class='rounded-lg bg-[#f0f0f0] border border-gray-500 w-full h-96'>
            <table class=' w-full rounded-lg text-center'>
                <thead>
                    <tr class='table w-full table-fixed'>
                        <% [:name, :create_time, :end_time, :status, :priority, :tag].each do |attr| %>
                            <th class='px-10 py-3'><%= User.human_attribute_name(attr)%></th>
                        <% end %>
                    </tr>
                </thead>
                <tr class='border-t border-gray-500'></tr>
                <tbody class='block h-83 overflow-y-auto rounded-b-lg'>
                    <% @tasks.each do |task|%>
                        <tr onclick="window.location = '<%= task_path(task) %>'" class='table w-full table-fixed bg-[#f0f0f0] hover:bg-[#ced4da]'>
                            <td class='px-10 py-3'><%= task.name %></td>
                            <td class='px-10 py-3'><%= task.create_time.strftime("%Y-%m-%d") %></td>
                            <td class='px-10 py-3'><%= task.end_time.strftime("%Y-%m-%d") %></td>
                            <td class='px-10 py-3'><%= task.status %></td>
                            <td class='px-10 py-3'><%= task.priority %></td>
                            <td class='px-10 py-3'><%= task.tag %></td>
                        </tr>
                    <% end %>
                </tbody>
            </table>
        </div>
        
        <div class='flex flex-row mt-40 gap-4 justify-end w-full'>
            <%= link_to edit_admin_path(@user), class:'bg-[#f0f0f0] rounded-lg px-8 py-2 my-5 border border-gray-500' do%>
                <%= t('todo.editTask') %>
            <% end %>
            <%= link_to admins_path, class:'bg-[#f0f0f0] rounded-lg px-8 py-2 my-5 border border-gray-500' do%>
                <%= t('todo.back') %>
            <% end %>
            <%= button_to admin_path(@user), class:'bg-[#f0f0f0] rounded-lg px-8 py-2 my-5 border border-gray-500', method: :delete do%>
                <%= t('todo.deleteTask') %>
            <% end %>
        </div>
    </div>
</div>